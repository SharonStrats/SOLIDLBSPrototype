var solid="object"==typeof solid?solid:{};solid.react=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=8)}([function(e,t){e.exports=React},function(e,t){e.exports=PropTypes},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n.apply(this,arguments)}e.exports=n},function(e,t){e.exports=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}},function(e,t){e.exports=solid.auth},function(e,t){e.exports=solid.data},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t){e.exports=function(e){var t;if("function"==typeof Symbol){if(Symbol.asyncIterator&&null!=(t=e[Symbol.asyncIterator]))return t.call(e);if(Symbol.iterator&&null!=(t=e[Symbol.iterator]))return t.call(e)}throw new TypeError("Object is not async iterable")}},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(4),c=n.n(i);let u=void 0;const s=new Set,a=(e,t)=>t;function l(e=a){const t=Object(r.useReducer)(e,u,e),n=t[0],o=t[1];return Object(r.useDebugValue)(u),Object(r.useEffect)(()=>(o(u),s.add(o),()=>s.delete(o)),[]),n}c.a.trackSession(e=>{u=e?e.webId:null;for(const e of s)e(u)});const d=(e,t)=>void 0===t?void 0:null!==t;function f(){const e=l(d);return Object(r.useDebugValue)(e),e}const p=(e,t)=>void 0===t?void 0:null===t;function h(){const e=l(p);return Object(r.useDebugValue)(e),e}var b=n(2),v=n.n(b),m=o.a.createContext({});function y(){const e=Object(r.useContext)(m);return Object(r.useDebugValue)(e.timestamp||null),e}var g=n(6),w=n.n(g),j=n(7),O=n.n(j);function x(e){return/^https?:[^"]+$/.test(e)&&(e=`["${e}"]`),e}function L(e,t){const n={};for(const r of t)n[r]=e[r];return n}function E(e){return e.displayName||e.name||"Component"}function $({drop:e=!1,timeBetween:t=10,concurrent:n=(e?1:4)}={}){let r=[],o=0;function i(){o=r.length&&setTimeout(i,t),r.splice(0,n).forEach(async({run:e,resolve:t,reject:n})=>{try{t(await e())}catch(e){n(e)}})}return{schedule:function t(n,c=null){if(!Array.isArray(n))return t([n])[0];const u=[],s=n.map(e=>new Promise((t,n)=>u.push({run:e,resolve:t,reject:n,group:c})));return e?r=u:r.push(...u),o||i(),s},clear:function(e){const t=r.length>0;return r=r.filter(t=>void 0!==e&&t.group!==e),t}}}var S=n(5),T=n.n(S);const k=$();class D{constructor(){w()(this,"pending",{}),w()(this,"cancel",!1)}destroy(){this.pending={},this.cancel=!0,k.clear(this)}async evaluate(e,t,n){n({pending:!0,error:void 0});const r=k.schedule([...Object.entries(e).map(([e,t])=>()=>this.evaluateAsValue(e,t,n)),...Object.entries(t).map(([e,t])=>()=>this.evaluateAsList(e,t,n))],this);try{await Promise.all(r)}catch(e){n({error:e})}const o=await Promise.all(r.map(e=>e.catch(e=>(console.warn("@solid/react-components","Expression evaluation failed.",e),!0))));this.cancel||o.some(e=>!e)||0!==Object.keys(this.pending).length||n({pending:!1})}async evaluateAsValue(e,t,n){const r=this.resolveExpression(e,t,"then");this.pending[e]=r;try{const t=await r;if(this.pending[e]!==r)return!1;n({[e]:t})}finally{this.pending[e]===r&&delete this.pending[e]}return!0}async evaluateAsList(e,t,n){const r=this.resolveExpression(e,t,Symbol.asyncIterator);if(!r)return!0;this.pending[e]=r;const o=[],i=()=>!this.cancel&&n({[e]:[...o]}),c=$({timeBetween:100,drop:!0});try{var u,s=!0,a=!1;try{for(var l,d,f=O()(r);s=(l=await f.next()).done,d=await l.value,!s;s=!0){const t=d;if(this.pending[e]!==r)return!1;o.push(t),c.schedule(i)}}catch(e){a=!0,u=e}finally{try{s||null==f.return||await f.return()}finally{if(a)throw u}}}finally{const t=c.clear();this.pending[e]===r&&(t&&i(),delete this.pending[e])}return!0}resolveExpression(e,t,n){if(!t)return"";const r="string"==typeof t?T.a.resolve(t):t;if(!r||"function"!=typeof r[n])throw new Error(`${e} should be an LDflex path or string but is ${t}`);return r}}const N={result:void 0,pending:!0,error:void 0},I={result:[],pending:!0,error:void 0},P={};function A(e,t=!1){const n=l(),o=y(),i=Object(r.useState)(t?I:N),c=i[0],u=c.result,s=c.pending,a=c.error,d=i[1];return Object(r.useDebugValue)(a||u,V),Object(r.useEffect)(()=>{const n=new D,r={result:e};return n.evaluate(t?P:r,t?r:P,e=>d(t=>v()({},t,e))),()=>n.destroy()},[e,o,n&&"string"==typeof e]),[u,s,a]}function V(e){return Array.isArray(e)?e.map(V):`${e}`}function C(e){const t=A(e,!1)[0];return Object(r.useDebugValue)(t,V),t}function B(e){const t=A(e,!0)[0];return Object(r.useDebugValue)(t,V),t}var q=function(e,t){return n=>{const r=t(n);return r.displayName=`${e}(${E(n)})`,r}}("WithWebId",e=>t=>o.a.createElement(e,v()({},t,{webId:l()})));function R(e,t,n){if(!n){var r=[t,[]];n=r[0],t=r[1]}e=e?[...e]:[],t=t?[...t]:[];const i={pending:!0};for(const t of e)i[t]=void 0;for(const e of t)i[e]=[];class c extends o.a.Component{constructor(...e){super(...e),w()(this,"state",i)}componentDidMount(){this.evaluator=new D,this.update=(e=>this.setState(e)),this.evaluate(e,t)}componentDidUpdate(n){const r=this.props.webId!==n.webId,o=e=>this.props[e]!==n[e]||r&&"string"==typeof this.props[e];this.evaluate(e.filter(o),t.filter(o))}componentWillUnmount(){this.evaluator.destroy()}render(){return o.a.createElement(n,v()({},this.props,this.state))}evaluate(e,t){const n=this.props,r=this.evaluator;(e.length>0||t.length>0)&&r.evaluate(L(n,e),L(n,t),this.update)}}return w()(c,"displayName",`EvaluateExpressions(${E(n)})`),q(c)}function U(e,t){return R([],[e],t)}function W({children:e=null}){return f()?e:null}function _({children:e=null}){return h()?e:null}function F({popup:e,children:t="Log in",className:n="solid auth login"}){return o.a.createElement("button",{className:n,onClick:()=>c.a.popupLogin({popupUri:e})},t)}function M({children:e="Log out",className:t="solid auth logout"}){return o.a.createElement("button",{className:t,onClick:()=>c.a.logout()},e)}var Y=n(3),z=n.n(Y);function G(e){let t=e.login,n=e.logout,r=z()(e,["login","logout"]);return f()?o.a.createElement(M,r,n):o.a.createElement(F,r,t)}function H({src:e,children:t}){const n=A(e),r=n[0],i=n[1],c=n[2];return void 0!==r&&null!==r?`${r}`:i?t||o.a.createElement("span",{className:"solid value pending"}):c?t||o.a.createElement("span",{className:"solid value error","data-error":c.message}):t||o.a.createElement("span",{className:"solid value empty"})}function J(e){let t=e.src,n=e.defaultSrc,r=e.children,i=void 0===r?null:r,c=z()(e,["src","defaultSrc","children"]);return(t=C(t)||n)?o.a.createElement("img",v()({src:t,alt:""},c)):i}function K({src:e,children:t=null}){return o.a.createElement(H,{src:e&&`${x(e)}.label`},t)}function Q(e){let t=e.href,n=e.children,r=z()(e,["href","children"]);return t=C(t)||"",n=n||o.a.createElement(K,{src:t&&`[${t}]`},`${t}`),t?o.a.createElement("a",v()({href:t},r),n):n}function X({src:e,children:t=null}){return o.a.createElement(H,{src:e&&`${x(e)}.name`},t)}function Z({src:e,offset:t=0,limit:n=1/0,filter:r=(()=>!0),container:i=(e=>o.a.createElement("ul",null,e)),children:c=((e,t)=>o.a.createElement("li",{key:t},`${e}`))}){const u=B(e).filter(r).slice(t,+t+ +n).map(c);return i?i(u):u}const ee="*",te={},ne={},re=new Set;class oe{constructor(e){this.subscriber=e}subscribe(...e){for(let t of e)(t=t.replace(/#.*/,""))in te||(te[t]=new Set,t!==ee?ie(t):re.forEach(ie)),te[t].add(this.subscriber)}unsubscribe(...e){for(let t of e)(t=t.replace(/#.*/,""))in te&&te[t].delete(this.subscriber)}}function ie(e){const t=new URL(e),n=t.protocol,r=t.host;let o=ne[r];if(!o){const e=`${n.replace("http","ws")}//${r}/`;ne[r]=o=new WebSocket(e),Object.assign(o,{enqueue:ce,onmessage:ue,ready:new Promise(e=>o.onopen=e)})}o.enqueue(`sub ${e}`)}async function ce(e){await this.ready,this.send(e)}function ue({data:e}){const t=/^pub +(.+)/.exec(e);if(!t)return;const n=t[1];T.a.clearCache(n);const r={timestamp:new Date,url:n};for(const e of te[n]||[])e(r);for(const e of te[ee]||[])e(r)}c.a.on("request",e=>{re.has(e)||(ee in te&&ie(e),re.add(e))});const se=m.Provider;function ae({subscribe:e="*",children:t=null}){const n=function(...e){const t=Object(r.useState)({}),n=t[0],o=t[1];return Object(r.useDebugValue)(n.timestamp||null),Object(r.useEffect)(()=>{const t=new oe(o);return t.subscribe(...e),()=>t.unsubscribe(...e)},e),n}(..."string"!=typeof e?e:/\S/.test(e)?e.trim().split(/\s+/):[]);return o.a.createElement(se,{value:n},t)}const le=T.a.context.as;function de(e){let t=e.activityType,n=void 0===t?`${le}Like`:t,i=e.object,c=void 0===i?`[${window.location.href}]`:i,u=e.children,s=e.shortName,a=void 0===s?/\w*$/.exec(n)[0]:s,l=e.className,d=void 0===l?`solid activity ${a.toLowerCase()}`:l,f=e.activateText,p=void 0===f?a:f,h=e.deactivateText,b=void 0===h?p:h,m=e.activateLabel,y=void 0===m?u?[p," ",u]:p:m,g=e.deactivateLabel,w=void 0===g?u?[b," ",u]:b:g,j=z()(e,["activityType","object","children","shortName","className","activateText","deactivateText","activateLabel","deactivateLabel"]);c=x(c);const O=Object(r.useState)(),L=O[0],E=O[1],$=C(`${c}.findActivity("${n}")`);return void 0===L&&$&&E(!0),d=`${d} ${L?"performed":""}`,o.a.createElement("button",v()({className:d,onClick:async function(){E(!L);try{const e=L?"delete":"create";await T.a.resolve(`${c}.${e}Activity("${n}")`),E(!L)}catch(e){E(L),console.warn("@solid/react-components",e)}}},j),L?w:y)}function fe(e,t,n,r){const i=`${le}${e}`;return e=>{let c=e.object,u=e.children,s=void 0===u?c?null:"this page":u,a=e.activateText,l=void 0===a?t:a,d=e.deactivateText,f=void 0===d?s?n:r:d,p=z()(e,["object","children","activateText","deactivateText"]);return o.a.createElement(de,v()({},p,{activityType:i,object:c,children:s,activateText:l,deactivateText:f}))}}var pe=fe("Like","Like","You liked","Liked"),he=fe("Dislike","Dislike","You disliked","Disliked"),be=fe("Follow","Follow","You follow","Following"),ve=n(1);const me=Object(ve.oneOfType)([ve.string,ve.object]),ye=Object(ve.oneOfType)([ve.number,ve.string]),ge=Object(ve.oneOfType)([ve.array,ve.string,ve.element]),we={children:ge.isRequired},je={src:me.isRequired,children:ge};function Oe(e,...t){e.propTypes=Object.assign({},...t)}Oe(W,we),Oe(W,we),Oe(F,{popup:ve.string}),Oe(G,F.propTypes),Oe(H,je),Oe(J,je,{defaultSrc:ve.string}),Oe(Q,{href:me.isRequired,children:ge}),Oe(K,je),Oe(X,je),Oe(Z,{src:me.isRequired,container:ve.func,children:ve.func,limit:ye,offset:ye,filter:ve.func}),Oe(ae,{subscribe:Object(ve.oneOfType)([ve.array,ve.string])}),n.d(t,"useWebId",function(){return l}),n.d(t,"useLoggedIn",function(){return f}),n.d(t,"useLoggedOut",function(){return h}),n.d(t,"useLDflex",function(){return A}),n.d(t,"useLDflexValue",function(){return C}),n.d(t,"useLDflexList",function(){return B}),n.d(t,"useLiveUpdate",function(){return y}),n.d(t,"withWebId",function(){return q}),n.d(t,"evaluateExpressions",function(){return R}),n.d(t,"evaluateList",function(){return U}),n.d(t,"LoggedIn",function(){return W}),n.d(t,"LoggedOut",function(){return _}),n.d(t,"LoginButton",function(){return F}),n.d(t,"LogoutButton",function(){return M}),n.d(t,"AuthButton",function(){return G}),n.d(t,"Value",function(){return H}),n.d(t,"Image",function(){return J}),n.d(t,"Link",function(){return Q}),n.d(t,"Label",function(){return K}),n.d(t,"Name",function(){return X}),n.d(t,"List",function(){return Z}),n.d(t,"LiveUpdate",function(){return ae}),n.d(t,"ActivityButton",function(){return de}),n.d(t,"LikeButton",function(){return pe}),n.d(t,"Like",function(){return pe}),n.d(t,"DislikeButton",function(){return he}),n.d(t,"Dislike",function(){return he}),n.d(t,"FollowButton",function(){return be}),n.d(t,"Follow",function(){return be}),n.d(t,"UpdateContext",function(){return m})}]);
//# sourceMappingURL=solid-react.js.map