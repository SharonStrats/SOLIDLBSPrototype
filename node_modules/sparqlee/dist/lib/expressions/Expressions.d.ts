import * as RDF from 'rdf-js';
import { Algebra } from 'sparqlalgebrajs';
import { Bindings } from '../Types';
export declare enum ExpressionType {
    Aggregate = "aggregate",
    Existence = "existence",
    Named = "named",
    Operator = "operator",
    SpecialOperator = "specialOperator",
    Term = "term",
    Variable = "variable"
}
export declare type Expression = AggregateExpression | ExistenceExpression | NamedExpression | OperatorExpression | SpecialOperatorExpression | TermExpression | VariableExpression;
export interface ExpressionProps {
    expressionType: ExpressionType;
}
export declare type AggregateExpression = ExpressionProps & {
    expressionType: ExpressionType.Aggregate;
    name: string;
    expression: Algebra.AggregateExpression;
    aggregate(): Promise<RDF.Term>;
};
export declare type ExistenceExpression = ExpressionProps & {
    expressionType: ExpressionType.Existence;
    expression: Algebra.ExistenceExpression;
    exists_with(mapping: Bindings): Promise<boolean>;
};
export declare type NamedExpression = ExpressionProps & {
    expressionType: ExpressionType.Named;
    name: RDF.NamedNode;
    apply: SimpleApplication;
    args: Expression[];
};
export declare type SimpleApplication = (args: TermExpression[]) => TermExpression;
export declare type OperatorExpression = ExpressionProps & {
    expressionType: ExpressionType.Operator;
    args: Expression[];
    apply: SimpleApplication;
};
export declare type EvaluatorAsync = (expr: Expression, mapping: Bindings) => Promise<TermExpression>;
export declare type EvalContextAsync = {
    args: Expression[];
    mapping: Bindings;
    evaluate: EvaluatorAsync;
};
export declare type SpecialApplicationAsync = (context: EvalContextAsync) => Promise<TermExpression>;
export declare type EvaluatorSync = (expr: Expression, mapping: Bindings) => TermExpression;
export declare type EvalContextSync = {
    args: Expression[];
    mapping: Bindings;
    evaluate: EvaluatorSync;
};
export declare type SpecialApplicationSync = (context: EvalContextSync) => TermExpression;
export declare type SpecialOperatorExpression = ExpressionProps & {
    expressionType: ExpressionType.SpecialOperator;
    args: Expression[];
    applyAsync: SpecialApplicationAsync;
    applySync: SpecialApplicationSync;
};
export declare type TermType = 'namedNode' | 'literal' | 'blankNode';
export declare type TermExpression = ExpressionProps & {
    expressionType: ExpressionType.Term;
    termType: TermType;
    str(): string;
    coerceEBV(): boolean;
    toRDF(): RDF.Term;
};
export declare type VariableExpression = ExpressionProps & {
    expressionType: ExpressionType.Variable;
    name: string;
};
