{"ast":null,"code":"/*\n * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nvar _require = require('./graphTypes'),\n    _isSubjectReference = _require.isSubjectReference;\n\nvar _require2 = require('./nodeMap'),\n    _createMergedNodeMap = _require2.createMergedNodeMap;\n\nvar api = {};\nmodule.exports = api;\n/**\n * Performs JSON-LD flattening.\n *\n * @param input the expanded JSON-LD to flatten.\n *\n * @return the flattened output.\n */\n\napi.flatten = function (input) {\n  var defaultGraph = _createMergedNodeMap(input); // produce flattened output\n\n\n  var flattened = [];\n  var keys = Object.keys(defaultGraph).sort();\n\n  for (var ki = 0; ki < keys.length; ++ki) {\n    var node = defaultGraph[keys[ki]]; // only add full subjects to top-level\n\n    if (!_isSubjectReference(node)) {\n      flattened.push(node);\n    }\n  }\n\n  return flattened;\n};","map":null,"metadata":{},"sourceType":"script"}